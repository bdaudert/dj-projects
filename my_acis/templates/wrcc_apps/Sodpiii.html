{% extends "base.html" %}
{%load my_wrcc_meta_filters%}
{% block content %}

<h1 align='center'>{{title}}</h1>
<div id='stn_selection'>
     <table border=0 align="right">
	  <form method="post" action="">{% csrf_token %}
         <table style="width:50%; height:100%; background-color:lightblue" class="sortable">{{ form1|safe }}</table>
         <input type="submit" value="Select" name="stn_selection"/>
         </form>
     </table>
</div>

{%if form_2_ready %}
	<table border=0 align="right">
	<form method="post" action="">{% csrf_token %}
	  <table style="width:50%; height:100%; background-color:lightblue" class="sortable">{{ form2|safe }}</table>
	  <input type="submit" value="Submit" name="app_form"/>
	</form>
  </table>
</br>
</br>
{%endif%}

{%if results_0 %}
  {%for stn, stn_data in results_0.items %}
    {%if not stn_data%}
    <p style="color:red">NO STATION DATA FOUND!</p></br>
    {%else%}
    {%for tbl_idx, table in stn_data.items%}
    <p class="stronger" style="color:darkblue; font-size:large">
    STATION NUMBER: {{coop_station_ids|lookup:stn|safe}}&nbsp;&nbsp;LOCATION:{{station_names|lookup:stn|safe}}</br>
    START YEAR {{start_year}} END YEAR {{end_year}}</br>
    START MONTH {{start_month}} END MONTH {{end_month}}</br>
    ELEMENT {{el_type}} UNITS {{units}}</br>
    DURATION {{duration|lookup:forloop.counter0}}</br>
    </p></br>
    <table>
      <tr>
        <td>Year</td><td>Value</td><td>Start Date(mmdd)</td><td>Days Missing</td>
        {%for row in table%}
        <tr>
            {%for val in row%}<td>{{val}}</td>{%endfor%}
        </tr>
         {%endfor%}
        </tr>
    </table>
    {%endfor%}
    {%endif%}
  {%endfor%}
{%endif%}

{%if results %}
  {%for stn, stn_data in results.items %}
    {%if not stn_data%}
    <p style="color:red">NO STATION DATA FOUND!</p></br>
    {%else%}

    {%for tbl_idx, table in stn_data.items%}
    <p class="stronger" style="color:darkblue; font-size:large">
    STATION NUMBER: {{coop_station_ids|lookup:stn|safe}}&nbsp;&nbsp;LOCATION:{{station_names|lookup:stn|safe}}</br> 
    START YEAR {{start_year}} END YEAR {{end_year}}</br>
    START MONTH {{start_month}} END MONTH {{end_month}}</br>
    ELEMENT {{el_type}} UNITS {{units}}</br>
    DURATION {{duration|lookup:tbl_idx|safe}}</br>
    AVERAGE {{averages|lookup:tbl_idx|safe}} ST DEV {{stdevs|lookup:tbl_idx|safe}} SKEWNESS {{skews|lookup:tbl_idx|safe}}
    ADJUSTMENT OF 1.00 APPLIED FOR CLOCK EFFECTS</br>
    USES OBSERVATION DAYS ONLY</br>
    </p></br>
      <table>
        <tr>
        <td>Prob of Nonexceednce</td><td>Prob of Exceednce</td><td>Return Interval</td><td>Value in Std. Dev.</td><td>Value in Absolute Units</td>
        </tr>
         {%for row in table %}
         <tr>
          {%for val in row%}
          <td style="text-align:right">{{val}}</td>
          {%endfor%}
         </tr>
         {%endfor%}
       </table>
    {%endfor%}
    {%endif%}
  {%endfor%}
{%endif%}

{% endblock %}
