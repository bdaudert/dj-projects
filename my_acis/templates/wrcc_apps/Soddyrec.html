{% extends "wrcc_base.html" %}
{%load my_wrcc_meta_filters%}
<head>
<script type="text/javascript" src="{{ MEDIA_URL }}js/jutils.js"></script>
</head>


{% block content %}

<div class="docu" id="Docu_Soddyrec" style="display:none;">{% include 'includes/Docu_soddyrec.html'%}</div>
<h1 align='center'>{{title}}
<img onclick="ShowPopupDocu('Docu_Soddyrec')" alt="Help" title="Help" src="{{ MEDIA_URL }}img/QMark.png" width="30" height="30">
</h1>
<div id='stn_selection'>
     <table border=0 align="right">
	  <form id="form1" method="post" action="">{% csrf_token %}
         <table class="sortable form">{{ form1|safe }}</table>
         <input type="submit" value="Select" name="stn_selection"/>
         </form>
     </table>
</div>

{%if form_2_ready %}
<div id="form2div">
	<table border=0 align="right">
	<form id="form2" method="post" action="">{% csrf_token %}
	    <table class="sortable form">{{ form2|safe }}</table>
        <input type="submit" value="Submit" name="app_form"/>
	</form>
  </table>
</div>
</br>
{%endif%}


{%if results%}
<div class="dataTableInfo"  align="left" style="max-width:95%;word-wrap:break-word;">
Cooling degree threshold =   65.00  Heating degree threshold =   65.00</br>
</br>
Mon         Month</br>
Day         Day</br>
Avgt        Multi-year non-smoothed average of the indicated quantity</br>
Extrm       Extreme value of indicated quantity for this day of year (LOW for mint, HIGH for all other elements)</br>
Year l      Latest year of occurrence of the extreme value</br>
No          Number of years with data for this day of year.</br>
Units       English (inches and degrees F)</br>
</div>

</br>
<br />

{%for stn, stn_data in results.items %}
    <h2>Station_name: {{station_names|lookup:stn|safe}}  Coop_station_id: {{station_ids|lookup:stn|safe}}</h2>
    {%if not stn_data%}
    <p style="color:red">NO STATION DATA FOUND!</p></br>
    {%else%}
    {%for el, el_data in stn_data.items%}
        <table class="dataTable nowrap"  border="1" width="760px" cellspacing="0" cellpadding="0">
        <thead>
        <tr><th colspan=8>{{elements|lookup:el|safe}}</th></tr>
        <tr>
        {%if elements|lookup:el == "pcpn" or elements|lookup:el == "snow" or elements|lookup:el == "snwd"%}
        <th>Mon</th><th>Day</th><th>Avgt</th><th>No</th><th>HI</th><th>Year</th>
        {%else%}
        <th>Mon</th><th>Day</th><th>Avgt</th><th>No</th><th>HI</th><th>Year</th><th>LO</th><th>Year</th>
        {%endif%}
        </tr>
        </thead>
        <tfoot>
        <tr>
        {%if elements|lookup:el == "pcpn" or elements|lookup:el == "snow" or elements|lookup:el == "snwd"%}
        <th>Mon</th><th>Day</th><th>Avgt</th><th>No</th><th>HI</th><th>Year</th>
        {%else%}
        <th>Mon</th><th>Day</th><th>Avgt</th><th>No</th><th>HI</th><th>Year</th><th>LO</th><th>Year</th>
        {%endif%}
        </tr>
        </tfoot>  
        <tbody>
        {%for vals in el_data %}
            <tr>
            {%if elements|lookup:el == "pcpn" or elements|lookup:el == "snow" or elements|lookup:el == "snwd"%}
                <td>{{vals.0}}</td><td>{{vals.1}}</td><td>{{vals.2}}</td><td>{{vals.3}}</td><td>{{vals.4}}</td><td>{{vals.5}}</td>
            {%else%}
                <td>{{vals.0}}</td><td>{{vals.1}}</td><td>{{vals.2}}</td><td>{{vals.3}}</td><td>{{vals.4}}</td><td>{{vals.5}}</td><td>{{vals.6}}</td><td>{{vals.7}}</td>
            {%endif%}
            </tr>
        {%endfor%}
        </tbody>
        </table>
    {%endfor%}
    {%endif%}
{%endfor%}<!--End station loop-->
{%endif%}<!--end if results-->

{% endblock %}
