{% extends "csc_base.html" %}

<meta name="keywords" content="station finder, map, by date range, by element, station data, historic data,application, product, tool">
<meta name="description" content="SW-CKN Generates graphs of monthly averages">

{% block content %}

<p align="center">You are here
    <a href="{{HOME_URL}}">HOME></a>
    <a href="{{SW_CKN_URL}}main_map/">RESOURCES></a>
    <a href="{{TOOLS_URL}}">TOOLS></a>
    <a href="{{TOOLS_URL}}station/">STATION TOOLS></a> 
    <a href="{{TOOLS_URL}}station/station_finder/">STATION FINDER</a>

    <!--First Table: Form, HowTos, Links-->    
    <table cellpadding="10">
    <!--First Row-->
    <tr>
        <!--First Column: form-->
        <td valign="top" width="30%">
        {%if not form1_ready%}        
            <div id='form0'>
                <form method="post" action="">{% csrf_token %}
                <table class="form">
                <tr>
                <td colspan="3"><p class="error">Refine your search here!</p></td>
                </tr>
                {%for field in form0 %}
                    <tr>
                    <td>{{field.label}}:</td>
                    <td>{{field}}</td>
                    <td><p class="trigger"><img alt="QMark" title="QMark" src="{{MEDIA_URL}}img/QMark.png" class="icon_small"></p>
                    <div class="pop-up"><p>{{field.help_text}}</p></div>
                    </td>
                    </tr>
                    {%if field.errors%}
                        <tr><td></td><td>{{field.errors}}</td><td></td></tr>
                    {%endif%}
                {%endfor%}
                <tr><td></td><td></td><td><input type="submit" value="Select" name="form0"/></td></tr>
                </table>
                </form>
            </div>
        {%endif%}

        {%if form1_ready%}
        <p align="left"><input type="submit" value="Start Over" onclick="window.location='{{TOOLS_URL}}station/station_finder/'"/></p>
        <div id='form1'>
            <form method="post" action="">{% csrf_token %}
            <table class="form">
            {%for field in form1 %}
                {%if field.is_hidden %}
                    {{field}}
                {%else%}
                <tr>
                    <td>{{field.label}}:</td>
                    {%if field.label == "Shape" %}
                        <td><input type="text" name="shape" id="shape" value="{{shape}}"></td>
                    {%elif field.label == "Bounding box"%}
                        <td><input type="text" name="bounding_box" id="bbox" value="{{bbox}}"></td>
                    {%elif field.label == "County" %}
                        <td><input type="text" name="county" id="county" value="{{county}}"></td>
                    {%elif field.label == "Climate division" %}
                        <td><input type="text" name="climate_division" id="climdiv" value="{{climdiv}}"></td>
                    {%elif field.label == "Basin" %}
                        <td><input type="text" name="basin" id="basin" value="{{basin}}"></td>
                    {%elif field.label == "County warning area" %}
                        <td><input type="text" name="county_warning_area" id="cwa" value="{{cwa}}"></td>
                    {%else%}                    
                        <td>{{field}}</td>
                    {%endif%}
                    <td><p class="trigger"><img alt="QMark" title="QMark" src="{{MEDIA_URL}}img/QMark.png" class="icon_small"></p>
                    {%ifequal field.label "Elements" %}
                        <div class="pop-up">
                        <img alt="ElementChoices" title="ElementChoices" src="{{MEDIA_URL}}img/ACIS_Element_Choices_Stn_Finder.png" id="ACISElementChoices" width="450" height="450" border="0">
                        </div>
                    {%else%}
                        {%ifequal field.label "Constraints" %}
                            <div class="pop-up">
                            <img alt="StnFinderLogic" title="StnFinderLogic" src="{{MEDIA_URL}}img/Stn_Finder_Logic.png" id="StnFinderLogic" width="400" height="200" border="0">
                            </div>
                        {%else%}
                            <div class="pop-up"><p>{{field.help_text}}</p></div>
                        {%endifequal%}
                    {%endifequal%}
                    </td>
                </tr>
                {%ifequal field.label "County" %}
                <tr><td></td><td align="right"><a target="_blank" href="http://www.nws.noaa.gov/mirs/public/prods/maps/cnty_fips_list.htm">List of US FIPS County Codes</a></td></tr>
                {%endifequal%}
                {%ifequal field.label "Climate division" %}
                <tr><td></td><td align="right"><a target="_blank" href="http://www.ncdc.noaa.gov/temp-and-precip/us-climate-divisions.php">Map and list of US climate divisions</a></td></tr>
                {%endifequal%}
                {%ifequal field.label "County warning area" %}
                <tr><td></td><td align="right"><a target="_blank" href="http://www.aprs-is.net/WX/NWSCodes.aspx">List of US County Warning Areas</a></td></tr>
                {%endifequal%}
                {%ifequal field.label "Basin" %}
                <tr><td></td><td align="right"><a target="_blank" href="http://water.usgs.gov/nawqa/sparrow/wrr97/geograp/huc_name.txt">List of US basin ids</a></td></tr>
                {%endifequal%}
                {%ifequal field.label "Bounding box" %}
                <tr><td></td><td align="right"><p class="error">Use map to define your Bounding Box.</p></td></tr>
                {%endifequal%}
               {%if field.errors%}
                 <tr><td></td><td>{{field.errors}}</td><td></td></tr>
                {%endif%}
               {%endif%}
            {%endfor%}
            <tr><td></td><td></td><td><input type="submit" value="Submit" name="form1"/></td></tr>
            </table>
            </form>
            <p class="error" align="left">Map may take a little time to load after Submit button is pressed. Thank you for being patient!</p>
        </div>
        {%endif%}
    </td>
    <!--Second Column: How Tos-->
    <td valign="top" width="40%">
        <div align="center" id=tool_info_head></div>
        <script type="text/javascript">                        
            $("#tool_info_head").load("{{MEDIA_URL}}html/commons.html .tool_info");
        </script>
        <div align="left" id="tool_info" style="display:none;"></div>
        <script type="text/javascript">                        
            $("#tool_info").load("{{MEDIA_URL}}html/commons.html #About_station_finder");
        </script>


        <div align="center" id="how_to_head"></div>
        <script type="text/javascript">            
            $("#how_to_head").load("{{MEDIA_URL}}html/commons.html .tool_how_to");
        </script>
        <div align="left" id="how_to" style="display:none"></div>
        <script type="text/javascript">            
            $("#how_to").load("{{MEDIA_URL}}html/commons.html #Howto_station_finder");
        </script>
    </td>
    <!--Third Column: Links-->
    <td valign="top" width="30%">
           <ul class="navbar">
                <h2>Links to other Networks</h2>
                <table>
                    <tr><td>
                    <a id="us_wide" href="http://www.raws.dri.edu/index.html" class="trigger" target="_blank">USA RAWS Climate Archive (WRCC)</a>
                    <div class="pop-up">
                        <p><font size="4">Summaries, Graphs, and other products for RAWS
                        (Remote Automatic Weather Stations).</font></p>
                    </div>
                    </td></tr>
                   <tr><td>
                    <a id="us_wide" href="http://www.wcc.nrcs.usda.gov/snow/" class="trigger" target="_blank">SNOTEL (<font color="red">W-US/Alaska</font>)</a>
                    <div class="pop-up">
                        <p><font size="4">Snowpack and related climatic data in the Western United States and Alaska.</font></p>
                    </div>
                    </td></tr>
                    <tr><td>
                    <a id="us_wide" href="http://www.cemp.dri.edu/" class="trigger" target="_blank">CEMP(<font color="red">NV</font>)</a>
                    <div class="pop-up">
                        <p><font size="4"></font>Community Environmental Monitoring Porgram. Monitoring air quality and climate near and downwind of the Nevada National Security Site.</p>
                    </div>
                    </td></tr>
                    <tr><td>
                    <a id="us_wide" href="http://nicenet.dri.edu/" class="trigger" target="_blank">NICE Net(<font color="red">NV</font>)</a>
                    <div class="pop-up">
                        <p><font size="4"></font>Nevada Integrated Climate and Evaporation Network.</p>
                    </div>
                    </td></tr>
                  <tr><td>
                    <a id="us_wide" href="http://www.wrcc.dri.edu/vallescaldera/" class="trigger" target="_blank">Valles Caldera(<font color="red">NM</font>)</a>
                    <div class="pop-up">
                        <p><font size="4">Valles Caldera Climate Network</font></p>
                    </div>
                    </td></tr>
                    <tr><td>
                    <a id="us_wide" href="http://mesowest.utah.edu/" class="trigger" target="_blank">MesoWest (<font color="red">US</font>)</a>
                    <div class="pop-up">
                        <p><font size="4">Access to current and archived weather observations across the United States.</font></p>
                    </div>
                    </td></tr>
                   <tr><td>
                        <a id="us_wide" href="http://www.cocorahs.org/" class="trigger" target="_blank">CoCoRaHS (<font color="red">US</font>)</a>
                    <div class="pop-up">
                        <p><font size="4">Community Collaborative Rain, Hail and Snow Network</font></p>
                    </div>
                    </td></tr>
                   <tr><td>
                    <a id="us_wide" href="http://www.ymp.dri.edu/index.html" class="trigger" target="_blank">Yucca Mountain Project(<font color="red">NV</font>)</a>
                    <div class="pop-up">
                        <p><font size="4">Climate Data from Yucca Mountain, Nevada.</font></p>
                    </div>
                    </td></tr>
                   <tr><td>
                    <a id="us_wide" href="http://www.wrcc.dri.edu/catalina/" class="trigger" target="_blank">Santa Catalina Island Climate Network(<font color="red">CA</font>)</a>
                    <div class="pop-up">
                        <p><font size="4">Climate Data from Santa Catalina Island.</font></p>
                    </div>
                    </td></tr>
                    <tr><td>
                    <a id="us_wide" href="http://www.wrcc.dri.edu/crn/" class="trigger" target="_blank">USCRN (<font color="red">US</font>)</a>
                    <div class="pop-up">
                        <p><font size="4">NOAA U.S. Climate Reference Network</font></p>
                    </div>
                    </td></tr>
                    <tr><td>
                    <a id="us_wide" href="http://www.wrcc.dri.edu/nrel/" class="trigger" target="_blank">Wind Energy Assessment(<font color="red">NV</font>)</a>
                    <div class="pop-up">
                        <p><font size="4"></font>Climate and Wind data for Nevada.</p>
                    </div>
                    </td></tr>
                    <tr><td>                                        
                    <a id="us_wide" href="http://www.tahoeclim.dri.edu/" class="trigger" target="_blank">TahoeClim(<font color="red">CA/NV</font>)</a>
                    <div class="pop-up">
                        <p><font size="4">Lake Tahoe Climate Information and Data.</font></p>
                    </div>
                    </td></tr>
                    <tr><td>
                    <a id="us_wide" href="http://www.calclim.dri.edu/" class="trigger" target="_blank">CalClim(<font color="red">CA</font>)</a>
                    <div class="pop-up">
                        <p><font size="4">California Climate Data Archive.</font></p>
                    </div>
                    </td></tr>
                    </table>
                </ul>
    </td>
    </tr></table>

    <!--Second Table: Legend Maps-->
    <table cellpadding="10" width="100%">
    <!--First Row-->
    <tr>
    <!--First Column: Legend-->
    <td valign="top" width="20%">
    {%if show_legend%}
        <div id="map_legend">
        <h3>Legend of Station Networks</h3>
        <p>Choose <a href="/csc/media/html/stn_id_system_docu.html" onClick="return popup_window(this, 'Networks')"><font color="#006666">Network ID</font></a>!</td>
        </div>
    {%endif%}
    </td>
    <!--Second Column: maps-->
    <td valign="top" width="70%">
       {%if need_map_bbox  and  not json_file %}
            <p class="error">Click and drag to define your Bounding Box!</p>
            <meta name="viewport" content="initial-scale=1.0, user-scalable=yes" />
            <div id="map" style="width: 100%; height:400px;"></div>
            <script type="text/javascript">
                initialize_bbox_map()
            </script>
        {%endif%}

       {%if need_polymap and not json_file%}
            <div id="panel">
                <div id="color-palette"></div>
                <div>
                    <button id="delete-button">Delete Selected Shape</button>
                </div>
            </div>
            <div id="polymap" style="width: 100%; height:400px;"></div>
            {%if lat and lon %}
                <input type="hidden" id="initial_lat" name="initial_lat" value={{lat}}>
                <input type="hidden" id="initial_lon" name="initial_lon" value={{lon}}>
            {%else%}
                <input type="hidden" id="initial_lat" name="initial_lat" value='39.82'>
                <input type="hidden" id="initial_lon" name="initial_lon" value='-98.57'>
            {%endif%}
            <script type="text/javascript">
                initialize_polygon_map()
            </script>
        {%endif%} 

    {%if need_overlay_map and not json_file%}
        <div id="form2">
            <form method="post" action="">{% csrf_token %}
            <table class="form">
                {%for field in form2 %}
                    <tr>
                    {%if not field.is_hidden %}
                       <td>{{field.label}}:</td><td>{{field}}</td>
                    {%else%}
                       <td style="display:none;">{{field.label}}</td><td style="display:none;">{{field}}</td>
                    {%endif%}
                    </tr>
                {%endfor%}
            </table>
            <input type="submit" value="Submit" name="form2"/>
            </form>
        </div>
        <p class="error">{{overlay_error}}</p>
        <div id="map-overlay" style="width:100%; height:400px;"></div>
        <div id="content-window" style="width:100px; height:100px;"></div>
        <script type="text/javascript">initialize_map_overlays("{{type}}","{{host}}", "{{kml_file_path}}")</script>
    {%endif%}

        {%if error%}
            <p class="error">{{error}}</p>
        {%endif%}

        <input type="hidden" id="URL_PREFIX" name="variable" value="{{ URL_PREFIX }}">
        <input type="hidden" id="MEDIA_URL" name="variable" value="{{ MEDIA_URL }}">
        <input type="hidden" id="DATA_URL" name="DATA_URL" value="{{DATA_URL}}">
        <input type="hidden" id="TOOLS_URL" name="TOOLS_URL" value="{{TOOLS_URL}}">

        {%if json_file%}
            <input type="hidden" id="json_file" name="variable" value="{{ json_file }}">
        {%else%}
            {%if empty_json%}
                <input type="hidden" id="json_file" name="variable" value="Empty.json">
            {%else%}
                <input type="hidden" id="json_file" name="variable" value="SW_stn.json">
            {%endif%}
        {%endif%}

       {%if start_date%}
            <input type="hidden" id="start_date" name="variable" value="{{start_date}}">
        {%endif%}
        {%if end_date%}
            <input type="hidden" id="end_date" name="variable" value="{{end_date}}">
        {%endif%}

        {%if elements%}
            <input type="hidden" id="elements" name="variable" value="{{elements}}">
        {%endif%}


        <p>{{map_title}}</p>
        <div id="map" style="width:100%;height:400px;"></div>
        <script type="text/javascript">
            initialize_station_finder()
        </script>

        <div style="height:200px;overflow:auto;" >
            <table cellspacing="1" id="station_list" border=1>
              <thead>
              <tr>
                <th>Name</th>
                <th>State</th>
                <th>Lat</th>
                <th>Lon</th>
                <th>Elev</th>
                <th>Networks</th>
              </tr>
              </thead>
            </table>
        </div>
    </td>
    </tr>
</table>

{%endblock%}
