{% extends "csc_base.html" %}

<meta name="keywords" content="Metadata, graph, coop station, station data, historic data,application, product, tool">
<meta name="description" content="SW-CKN Generates Metadata graph for a coop station">

{%load my_data_filters%}

{% block content %}

<p align="center">You are here
    <a href="{{HOME_URL}}">HOME></a>
    <a href="{{SW_CKN_URL}}main_map/">RESOURCES></a>
    <a href="{{TOOLS_URL}}">TOOLS></a>
    <a href="{{TOOLS_URL}}station/">STATION TOOLS></a> 
    <a href="{{TOOLS_URL}}station/sodxtrmts/">Monthly Summaries of Extremes></a>
    <a href="{{TOOLS_URL}}station/sodxtrmts/visualize/">Time Series Plots - Monthly Summaries of Extremes</a>

</p>

<div class="container">
    <div class="center-left" style="border:none;">
        <div id='form0'>
        <form method="post" action="">{% csrf_token %}
        <table class="form">
        {%for field in form0 %}
            <tr>
                <td>{{field.label}}:</td>
                <td>{{field}}</td>
                <td><p class="trigger"><img alt="QMark" title="QMark" src="{{MEDIA_URL}}img/QMark.png" class="icon_small"></p>
                {%ifequal field.label "summary"%}
                    <img alt="SxtrSummary" title="SxtrSummary" src="{{MEDIA_URL}}img/SxtrSummary.png" id="ACISElementChoices" width="450" height="450" border="0">
                {%else%}
                    <div class="pop-up"><p>{{field.help_text}}</p></div>
                {%endifequal%}
                </td>
            </tr>
            {%if field.errors%}
                 <tr><td></td><td>{{field.errors}}</td><td></td></tr>
            {%endif%}
        {%endfor%}
        </table>
        <input type="submit" value="Submit" name="form0"/>
        </form>
        </div>
    </div>
    
    <div class="center" style="border:none;background-color:X^H#947e6e;">
        <h2>{{title}}</h2>
        <div id=tool_info_head></div>
        <script type="text/javascript">                        
            $("#tool_info_head").load("{{MEDIA_URL}}html/commons.html .tool_info");
        </script>
        <div id="tool_info" style="display:none;"></div>
        <script type="text/javascript">            
            $("#tool_info").load("{{MEDIA_URL}}html/commons.html #Docu_SODXTRMTS_VIS");
        </script>

        <div id="how_to_head"></div>
        <script type="text/javascript">            
            $("#how_to_head").load("{{MEDIA_URL}}html/commons.html .tool_how_to");
        </script>
        <div id="how_to" style="display:none;">
            <p>Pick the months that you would like to visualize.</p>
            <p>Choose a summary otion:</p>
            <p>
                <b>Maximum over months</b> --<br />
                Plots the maximum value of the chosen months for each year in the time period.<br />
                <b>Minimum over months</b> --<br />
                Plots the minimum value of the chosen months for each year in the time period.<br />
                <b>Sum over months</b> --<br />
                Plots the sum of the values of the chosen months for each year in the time period.<br />
                <b>Average over months</b> --<br />
                Plots the averages of the values of the chosen months for each year in the time period.<br />
                <b>Plot months separately</b> --<br />
                Generates a plot of time series for each of the chosen months.<br />
            </p>
        </div>

        {%if search_params%}
            <p class="pop_link" onClick="ShowHide('search_params')"><u>Show/hide the search parameters</u></p>
            <div id="search_params" style="display:none;">
                <p class="error"><b>Search Parameters</b>:</p>
                {%for key, val in search_params.items%}
                <p><b>{{key}}</b>: {{val}}</p>
                {%endfor%}
            </div>
        {%endif%}
        
        <p class="pop_link" onClick="ShowHide('original_data')"><u>Show/hide the original data</u></p>
        <div id='original_data' style="display:none;">
            <table id="printable_table" cellpadding="none">
            <tr>
            <td><font size="+2">YEAR</font></td>
            {%for mon in month_list%}
                {%if forloop.last %}
                    <td colspan="2"><font size="+2"></td>
                    <td colspan="2"><font size="+2"></td>
                    <td colspan="2"><font size="+2"></td>
                {%endif%}
                <td colspan="2"><font size="+2">{{mon}}</font></td>
            {%endfor%}
            </tr>
            {%for yr_data in data %}
                {%if yr_data.0 == "MEAN"%}
                    <tr><td></td><td></td></tr>
                    <tr><td></td><td></td></tr>
                    <tr><td></td><td></td></tr>
                    <tr><td></td><td></td></tr>
                    <tr><td></td><td></td></tr>
                    <tr><td></td><td></td></tr>
                {%endif%}
                <tr>
                {%for dat in yr_data%}
                    {%if forloop.revcounter0 == 1%}
                        <td></td><td></td>
                        <td></td><td></td>
                        <td></td><td></td>
                    {%endif%}
                    <td>{{dat}}</td>
                {%endfor%}
                </tr>
            {%endfor%}
            </table>
        </div>
        {%if generate_plots%}
            <!--<input type="text" id="test" name="test" value="blah">-->
            <input type="hidden" id="JSON_URL" name="JSON_URL" value="{{ MEDIA_URL }}tmp/">
            <input type="hidden" id="json_file" name="json_file" value="{{json_file}}">
            <input type="hidden" id="months" name="months" value="{{months}}">
            <input type="hidden" id="summary" name="summary" value="{{summary}}">
            <div align="center" id="container" style="height:350px;width:100%;"></div>
            <script type="text/javascript" src="{{ MEDIA_URL }}js/hc-sodxtrmts-visualize.js"></script>
        {%endif%}
    </div><!--end center-->


</div><!--end container-->

  <!-- Footer -->
<!--
  <div id="footer" align="center"></div>
    <script type="text/javascript">                        
    $("#footer").load("{{MEDIA_URL}}html/commons.html .footer-partners");
    </script>
-->
{%endblock%}
