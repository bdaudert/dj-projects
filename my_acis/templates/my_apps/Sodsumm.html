{% extends "base.html" %}
{%load my_meta_filters%}
{% block content %}


<h1 align='center'>{{title}}</h1>
<div id='stn_selection'>
     <table border=0 align="right">
	  <form method="post" action="">{% csrf_token %}
         <table style="width:50%; height:100%; background-color:lightblue" class="sortable">{{ form1|safe }}</table>
         <input type="submit" value="Select" name="stn_selection"/>
         </form>
     </table>
</div>

{%if form_2_ready %}
	<table border=0 align="right">
	<form method="post" action="">{% csrf_token %}
	  <table style="width:50%; height:100%; background-color:lightblue" class="sortable">{{ form2|safe }}</table>
	  <input type="submit" value="Submit" name="app_form"/>
	</form>
  </table>
</br>
</br>
{%endif%}


{%if results %}
  <p>
  For monthly and annual mean, thresholds and sums:</br>
  Month with {{max_missing_days}} or more missing days are not considered</br>
  Years with one or mor missing months are not considered</br>
  Two-didgit years are departures from 1900: -20 = 1880, 102 = 2002</br>
  </p>
  {%for stn, stn_data in results.items %}
    <p class="stronger" style="color:darkblue">Station: ({{coop_station_ids|lookup:stn|safe}}) {{station_names|lookup:stn|safe}}</br>
    From Year {{start_year}} To Year {{end_year}}</br>
    </p></br>
    {%if not stn_data%}
    <p style="color:red">NO STATION DATA FOUND!</p></br>
    {%else%}
        {%for type_idx, table_type in stn_data.items %}
        {% if table_type.0 %}
        <table>
        {{headers|lookup:type_idx|safe}}
        </table>
        </br>
        {%endif%}
        <table>
        <tr text-align="right">
        {%for row in table_type %}
          <tr text-align="right">{%for val in row%}<td>{{val}}<td>{%endfor%}</tr>
        {%endfor%}
        </td>
        </table>
        </br>
        {%endfor%}
   {%endif%}     
  {%endfor%}
{%endif%}
{% endblock %}
